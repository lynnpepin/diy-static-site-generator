<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>GIMP &lt;3 Python! Let's make a YuGiOh rip off</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../style.css" />
  <!--[if lt IE 9]>
    <script src="/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <a href="/index.html" id="blog-title-link">
  <h1 id="blog-title">
  lynn pepin //<code>lynndotpy</code>
  </h1>
  <p></a></p>
  <p id="header">
  <a href="/index.html">Index</a> | <a href="/about.html">About</a> | <a
  href="/projects.html">Projects</a>
  </p>

<!-- favicons, code ty https://realfavicongenerator.net/ -->
<link rel="apple-touch-icon" sizes="180x180" href="favicon_package/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="favicon_package/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="favicon_package/favicon-16x16.png">
<link rel="manifest" href="favicon_package/site.webmanifest">
<link rel="mask-icon" href="favicon_package/safari-pinned-tab.svg" color="#5bbad5"> 
<link rel="shortcut icon" href="favicon_package/favicon.ico">
<meta name="msapplication-TileColor" content="#da532c">
<meta name="theme-color" content="#ffffff">

</head>
<body>
<hr />

<time datetime=2020-12-31>
<p class="date">2020-12-31</p>

<header>
<h1 class="title">GIMP &lt;3 Python! Let's make a YuGiOh rip off</h1>

</header>

<blockquote>
<p><strong>tldr:</strong> Open the Python-Fu console (Filters &gt;
Python-Fu &gt; Console) and reference GIMP's built-in <code>pdb</code>
documentation (Help &gt; Procedure browser). A simple 'hello world' is
presented:</p>
<blockquote>
<div class="sourceCode" id="cb1"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a>img <span class="op">=</span> gimp.image_list()[<span class="dv">0</span>]</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a>title_layer <span class="op">=</span> pdb.gimp_image_get_layer_by_name(img, <span class="st">&#39;Title&#39;</span>)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>pdb.gimp_text_layer_set_text(title_layer, <span class="st">&quot;Hello world!&quot;</span>)</span></code></pre></div>
</blockquote>
</blockquote>
<hr />
<h1
id="gimp-is-a-good-image-editor-and-you-can-automate-it-with-python">gimp
is a good image editor, and you can automate it with python</h1>
<p>For those unfamiliar with <a href="https://www.gimp.org/">GIMP
(gimp.org)</a>, it is a free and open-source image editor, and one of my
favorite tools.</p>
<p>I'm a long-time GIMP user and a long-time Python user. GIMP has this
nifty feature called "PythonFu" that allows you to modify images using
Python code. (GIMP also exposes a Scheme interface.) With GIMP and
Python knowledge, it enables one to automatically edit images. There are
plenty of tutorials and documentation, but none of them enabled me to
"get my hands dirty", which is why I'm writing this post.</p>
<p>Automating GIMP was useful for me when making a little Yu-Gi-Oh
inspired card game. Instead of editing 60+ cards titles and descriptions
by hand, I used a script to read a spreadsheet and do it for me. I'll
edit this post once I have the code ready. :)</p>
<h1 id="the-dev-experience-is-janky-heres-how-i-do-it">the dev
experience is janky! here's how i do it</h1>
<blockquote>
<p><strong>tldr:</strong> In four corners: GIMP editor, GIMP Python
procedure browser for documentation, Python console, and a Python
editor. Run scripts by copy and pasting them.</p>
</blockquote>
<p>If you have experience with GIMP and Python and want to learn how to
automate GIMP, then let me show you my basic GIMP Python scripting
setup:</p>
<figure>
<img src="../images/gimp-python-dev-setup.png"
title="A screenshot showing four windows open in tiled configuration: (1) A GIMP image-editing window with a card-template reminiscent of Yu-Gi-Oh, (2) A &#39;procedure browser&#39; showing a list of GIMP procedures with corresponding documentation, (3) An interactive Python console that programatically modifies the GIMP image, and (4) A text editor used as a &#39;scratch space&#39; with a list of commands."
alt="A screenshot showing four windows open in tiled configuration: (1) A GIMP image-editing window with a card-template reminiscent of Yu-Gi-Oh, (2) A &#39;procedure browser&#39; showing a list of GIMP procedures with corresponding documentation, (3) An interactive Python console that programatically modifies the GIMP image, and (4) A text editor used as a &#39;scratch space&#39; with a list of commands." />
<figcaption aria-hidden="true">A screenshot showing four windows open in
tiled configuration: (1) A GIMP image-editing window with a
card-template reminiscent of Yu-Gi-Oh, (2) A 'procedure browser' showing
a list of GIMP procedures with corresponding documentation, (3) An
interactive Python console that programatically modifies the GIMP image,
and (4) A text editor used as a 'scratch space' with a list of
commands.</figcaption>
</figure>
<p>I keep keep these four windows open on one screen:</p>
<ol type="1">
<li>The GIMP image I want to modify.</li>
<li>The Procedure Browser (under GIMP Help &gt; Procedure Browser)</li>
<li>A GIMP Python console (under GIMP Filters &gt; Python-Fu &gt;
Console)</li>
<li>A text editor as a workspace / scratchpad.</li>
</ol>
<p>For those unfamiliar, the GIMP Python console is interactive.
<strong>Paste code into the console, hit enter, and the commands will
execute within GIMP.</strong></p>
<h1 id="some-other-tips">Some other tips</h1>
<p>Get your hands dirty, try something out in the console! Most work
that one can do manually can also be reproduced in code. (Some
exceptions exist, such as text editing). The procedure browser is your
friend when exploring and experimenting, and it is the most complete
documentation I could find. This hacky workflow was instrumental in a
number of small projects I was able to complete, and was one of the best
GIMP skills I learned in these past 10 years. :)</p>
<p>Here are some other small things that I wish someone told me from the
start:</p>
<ul>
<li>AFAIK, there is no officially-supported method to run
<code>pdb</code> headless in Python scripts. Your interactions have to
be through the GIMP executable's bundled Python interpreter.</li>
<li>GIMP uses the "<code>pdb</code>" library for most interactions. This
is <em>not</em> the same as the Python debugger.</li>
<li>To use a function in the Procedure Browser, say,
"<code>gimp-image-set-active-layer</code>", you want to call
"<code>pdb.gimp_image_set_active_layer</code>".</li>
<li>The Procedure Browser is the most complete and easy-to-search
<code>pdb</code> documentation...</li>
<li>... But some documented parameters will not match the Python libary.
For example, the blur plugin "<code>plug-in-gauss-iir</code>" lists a
"<code>run-mode</code>" parameter, but the function
"<code>pdb.plug_in_gauss_iir</code>" does not use that parameter.</li>
<li>GIMP uses Python 2.7, but should be using Python 3 in 2021.</li>
</ul>
<h1 id="hello-world">hello world!</h1>
<p>As a quick "hello world" example, consider the following steps:</p>
<ol type="1">
<li>Create a new image in GIMP</li>
<li>Add a text layer, with layer title "Title"</li>
<li>Open the Python console (Filters &gt; Python-Fu &gt; Console)</li>
<li>Enter the below lines into the console! Your text layer will be
modified to say 'Hello world!".</li>
</ol>
<blockquote>
<div class="sourceCode" id="cb2"><pre
class="sourceCode python"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>img <span class="op">=</span> gimp.image_list()[<span class="dv">0</span>]</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>title_layer <span class="op">=</span> pdb.gimp_image_get_layer_by_name(img, <span class="st">&#39;Title&#39;</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>pdb.gimp_text_layer_set_text(title_layer, <span class="st">&quot;Hello world!&quot;</span>)</span></code></pre></div>
</blockquote>
<hr />
<p id="footer">
<a href="https://gitlab.com/lynnpepin/">lynndotpy</a> since 2020 | <a
href="https://creativecommons.org/licenses/by-nc-sa/4.0/">cc
by-nc-sa</a> unless specified | <a
href="https://mastodon.social/@lynndotpy">mastodon</a> | <a
href="https://twitter.com/lynndotpy">twitter</a> | <a
href="https://gitlab.com/lynnpepin/diy-static-site-generator">gitlab</a>
| <a
href="https://github.com/lynnpepin/diy-static-site-generator">github</a>
</p>
</body>
</html>
